#!/usr/bin/env python3
"""ok-cpp 入口脚本。

这个脚本作为 ok-cpp 的主入口点，负责：
1. 设置 Python 路径以包含 okcpp 包
2. 导入并调用 CLI 主函数
"""

import sys
from pathlib import Path

# 脚本所在目录
script_dir = Path(__file__).parent

# 尝试两个可能的位置：
# 1. 安装环境: $PREFIX/lib/okcpp
# 2. 开发环境: src/okcpp (脚本在 src/bin/)
lib_dir = script_dir.parent / "lib"
src_dir = script_dir.parent

# 安装环境：使用 lib/okcpp
if lib_dir.exists() and (lib_dir / "okcpp").exists():
    sys.path.insert(0, str(lib_dir))
# 开发环境：脚本在 src/bin/，okcpp 在 src/
elif (src_dir / "okcpp").exists():
    sys.path.insert(0, str(src_dir))

# 导入并运行主函数
from okcpp.cli import main

if __name__ == "__main__":
    sys.exit(main())
